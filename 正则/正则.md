## 正则规则小抄

### 字符匹配
\   转义符<br>
\d  [0-9]。表示是一位数字。记忆方式：其英文是digit（数字）。<br>
\D  [^0-9]。表示除数字外的任意字符。<br>
\w  [0-9a-zA-Z_]。表示数字、大小写字母和下划线。记忆方式：w是word的简写，也称单词字符。<br>
\W  [^0-9a-zA-Z_]。非单词字符。<br>
\s  [ \t\v\n\r\f]。表示空白符，包括空格、水平制表符、垂直制表符、换行符、回车符、换页符。记忆方式：s是space character的首字母。<br>
\S  [^ \t\v\n\r\f]。 非空白符。<br>
.   [^\n\r\u2028\u2029]。通配符，表示几乎任意字符。换行符、回车符、行分隔符和段分隔符除外。<br>
\uxxxx  查找以十六进制数 xxxx 规定的 Unicode 字符。<br>
[abc]   any of a, b, or c<br>
[^abc]  not a, b, or c<br>
[a-g]   character between a & g

### 位置匹配
\b  是单词边界，具体就是\w和\W之间的位置，也包括\w和^之间的位置，也包括\w和$之间的位置。具体说来就是\w与\w、\W与\W、^与\W，\W与$之间的位置。<br>
\B  是\b的反面的意思，非单词边界。例如在字符串中所有位置中，扣掉\b，剩下的都是\B的。<br>
^abc$   start / end of the string

### 组
(abc)   capture group，捕获组<br>
\1  backreference to group #1<br>
(?:abc)     non-capturing group，非捕获组

### 先行断言
a(?=b)  positive lookahead，先行断言，a只有在b前面才匹配<br>
a(?!b)  negative lookahead，先行否定断言，a只有不在b前面才匹配

### 后行断言
(?<=b)a  positive lookbehind，后行断言，a只有在b后面才匹配<br>
(?<!b)a  negative lookbehind，后行否定断言，a只有不在b后面才匹配

### 量词和分支
a*  0 or more<br>
a+  1 or more<br>
a?  0 or 1<br>
a{5}    exactly five<br>
a{2,}   two or more<br>
a{1,3}  between one & three<br>
a+?a{2,}?   match as few as possible，惰性匹配，就是尽可能少的匹配<br>

以下都是惰性匹配<br>
{m,n}? <br>
{m,}?<br>
??<br>
+?<br>
*?

### 分支
ab|cd   match ab or cd，匹配'ab'或者'cd'字符子串

### 修饰符
i   执行对大小写不敏感的匹配。<br>
g   执行全局匹配（查找所有匹配而非在找到第一个匹配后停止）。<br>
m   执行多行匹配。<br>
u   开启"Unicode 模式"，用来正确处理大于\uFFFF的 Unicode 字符。也就是说，会正确处理四个字节的 UTF-16 编码。<br>
y   y修饰符的作用与g修饰符类似，也是全局匹配，后一次匹配都从上一次匹配成功的下一个位置开始。不同之处在于，g修饰符只要剩余位置中存在匹配就可，而y修饰符确保匹配必须从剩余的第一个位置开始，这也就是"粘连"的涵义<br>

## 运算符优先级

见  http://www.runoob.com/regexp/regexp-operator.html

见  http://www.runoob.com/regexp/regexp-operator.html

<table>
    <thead>
        <tr>
            <th>运算符</th>
            <th>描述</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>\</td>
            <td>转义符</td>
        </tr>
        <tr>
            <td>(), (?:), (?=), []</td>
            <td>圆括号和方括号</td>
        </tr>
        <tr>
            <td>*, +, ?, {n}, {n,}, {n,m}</td>
            <td>限定符</td>
        </tr>
        <tr>
            <td>^, $, \任何元字符、任何字符</td>
            <td>定位点和序列（即：位置和顺序）</td>
        </tr>
        <tr>
            <td>|</td>
            <td>替换，"或"操作<br>
字符具有高于替换运算符的优先级，使得"m|food"匹配"m"或"food"。若要匹配"mood"或"food"，请使用括号创建子表达式，从而产生"(m|f)ood"。</td>
        </tr>
    </tbody>
</table>

## 正则相关API

## 常用正则

1. 校验密码强度

密码的强度必须是包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间。
```
^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$
```

2. 校验中文

字符串仅能是中文。
```
^[\\u4e00-\\u9fa5]{0,}$
```

3. 校验E-Mail 地址

同密码一样，下面是E-mail地址合规性的正则检查语句。
```
[\\w!#$%&'*+/=?^_`{|}~-]+(?:\\.[\\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\\w](?:[\\w-]*[\\w])?\\.)+[\\w](?:[\\w-]*[\\w])?
```

4. 

5. 校验身份证号码

下面是身份证号码的正则校验。15 或 18位。

15位：
```
^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$
```
18位：
```
^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}([0-9]|X)$
```

6. 校验日期

“yyyy-mm-dd“ 格式的日期校验，已考虑平闰年。
```
^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29)$
```

7. 校验金额

金额校验，精确到2位小数。
```
^[0-9]+(.[0-9]{2})?$
```

8. 校验手机号

下面是国内 13、15、18开头的手机号正则表达式。（可根据目前国内收集号扩展前两位开头号码）
```
^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$
```

9. 判断IE的版本

IE目前还没被完全取代，很多页面还是需要做版本兼容，下面是IE版本检查的表达式。
```
^.*MSIE [5-8](?:\\.[0-9]+)?(?!.*Trident\\/[5-9]\\.0).*$
```

10. 校验IP-v4地址

IPV4 正则语句。
```
\\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b
```

11. 校验IP-v6地址

IPV6 正则语句。
```
(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))
```

12. 检查URL的前缀

应用开发中很多时候需要区分请求是HTTPS还是HTTP，通过下面的表达式可以取出一个url的前缀然后再逻辑判断。
```
if (!s.match(/^[a-zA-Z]+:\\/\\//))
{
    s = 'http://' + s;
}
```

13. 提取URL链接

下面的这个表达式可以筛选出一段文本中的URL。
```
^(f|ht){1}(tp|tps):\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- ./?%&=]*)?
```

14. 文件路径及扩展名校验

验证windows下文件路径和扩展名（下面的例子中为.txt文件）
```
^([a-zA-Z]\\:|\\\\)\\\\([^\\\\]+\\\\)*[^\\/:*?"<>|]+\\.txt(l)?$
```

15. 提取Color Hex Codes

有时需要抽取网页中的颜色代码，可以使用下面的表达式。
```
^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$
```

16. 提取网页图片

假若你想提取网页中所有图片信息，可以利用下面的表达式。
```
\\< *[img][^\\\\>]*[src] *= *[\\"\\']{0,1}([^\\"\\'\\ >]*)
```

17. 提取页面超链接

提取html中的超链接。
```
(<a\\s*(?!.*\\brel=)[^>]*)(href="https?:\\/\\/)((?!(?:(?:www\\.)?'.implode('|(?:www\\.)?', $follow_list).'))[^"]+)"((?!.*\\brel=)[^>]*)(?:[^>]*)>
```

18. 查找CSS属性

通过下面的表达式，可以搜索到相匹配的CSS属性。
```
^\\s*[a-zA-Z\\-]+\\s*[:]{1}\\s[a-zA-Z0-9\\s.#]+[;]{1}
```

19. 抽取注释

如果你需要移除HMTL中的注释，可以使用如下的表达式。
```
<!--(.*?)-->
```

20. 匹配HTML标签

通过下面的表达式可以匹配出HTML中的标签属性。
```
<\\/?\\w+((\\s+\\w+(\\s*=\\s*(?:".*?"|'.*?'|[\\^'">\\s]+))?)+\\s*|\\s*)\\/?>
```